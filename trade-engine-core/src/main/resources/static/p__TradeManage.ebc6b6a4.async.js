(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[131],{87294:function(_,M,t){"use strict";t.r(M),t.d(M,{default:function(){return ye}});var S=t(69885),x=t(87379),f=t(1898),v=t(29024),W=t(81766),b=t(7935),N=t(83385),k=t(55297),Y=t(34729),D=t(99618),H=t(29068),L=t(65175),Z=t(80153),w=t(89167),z=t(23643),U=t(55614),r=t(37455),l=t(51758),T=t(94043),n=t.n(T),e=t(67294),ee=t(49500),te=t(26362),ne=t(61020),K=t(72709);function ae(c){return B.apply(this,arguments)}function B(){return B=(0,Z.Z)(n().mark(function c(u){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,K.Z)("/financial/tradeOrder",{method:"POST",data:u}));case 1:case"end":return a.stop()}},c)})),B.apply(this,arguments)}function re(c){return R.apply(this,arguments)}function R(){return R=(0,Z.Z)(n().mark(function c(u){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,K.Z)("/financial/tradeOrder/cancelTradeOrder",{method:"PUT",params:(0,ne.Z)({},u)}));case 1:case"end":return a.stop()}},c)})),R.apply(this,arguments)}var A=t(85304);function le(c){return F.apply(this,arguments)}function F(){return F=(0,Z.Z)(n().mark(function c(u){return n().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,K.Z)("/financial/market/getKMarket",{method:"GET",params:u}));case 1:case"end":return a.stop()}},c)})),F.apply(this,arguments)}var ue=t(41561),ie=t.n(ue),se=t(30161),oe=t(45545),J=t(41344),G=t(53472),ce=function(u){var i=u.symbolId,a={alignLabels:!0,timeScale:{rightOffset:12,barSpacing:3,fixLeftEdge:!0,lockVisibleTimeRangeOnResize:!0,rightBarStaysOnScroll:!0,borderVisible:!1,borderColor:"#fff000",visible:!0,timeVisible:!0,secondsVisible:!0}},y=(0,e.useState)([]),h=(0,l.Z)(y,2),I=h[0],E=h[1];(0,e.useEffect)(function(){var s=setInterval(function(){le({symbolId:i}).then(function(g){g&&g.content&&E(g.content)})},1e3);return function(){clearInterval(s)}},[i]);var p=[{data:I.map(function(s){return{time:s.time/1e3,open:s.open,high:s.high,low:s.low,close:s.close}})}];return e.createElement(ie(),{options:a,candlestickSeries:p,autoWidth:!0,height:320})},me=function(u){var i=u.selectSymbol,a=(0,e.useState)([]),y=(0,l.Z)(a,2),h=y[0],I=y[1],E=(0,e.useState)(0),p=(0,l.Z)(E,2),s=p[0],g=p[1];(0,e.useEffect)(function(){(0,te.cI)().then(function(m){m&&m.content&&(I(m.content),m.content.length>0&&(g(m.content[0].id),i(m.content[0].id)))})},[i]);var C=h.map(function(m){return e.createElement(r.ZP,{key:m.id,value:m.id},m.symbol," # ",m.engineStatus)}),P=function($){g($.target.value),i($.target.value)};return e.createElement(r.ZP.Group,{onChange:P,value:s},e.createElement(z.Z,{direction:"vertical"},C))},de=function(u){var i=u.symbolId,a=(0,e.useState)("\u4E70\u5165"),y=(0,l.Z)(a,2),h=y[0],I=y[1];return e.createElement("div",null,e.createElement(se.ZP,{onFinish:function(){var E=(0,Z.Z)(n().mark(function p(s){return n().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:ae({amount:s.amount,price:s.price,side:s.side,symbolId:i}).then(function(P){P.success&&L.default.success(P.content)});case 1:case"end":return C.stop()}},p)}));return function(p){return E.apply(this,arguments)}}(),params:{},initialValues:{price:1,amount:100,side:"BUY"}},e.createElement(oe.Z.Group,{style:{margin:16},name:"side",radioType:"button",fieldProps:{value:h,onChange:function(p){return I(p.target.value)}},options:["BUY","SELL"]}),e.createElement(J.Z,{width:"xs",name:"price",label:"\u4EF7\u683C",min:1,max:1e7,fieldProps:{precision:2}}),e.createElement(J.Z,{width:"xs",name:"amount",label:"\u6570\u91CF",min:0,fieldProps:{precision:0}})))},fe=function(){var u=(0,e.useRef)(),i=(0,e.useState)("holdPosition"),a=(0,l.Z)(i,2),y=a[0],h=a[1],I=[{key:"holdPosition",tab:"\u6301\u4ED3"},{key:"cancelOrder",tab:"\u53EF\u64A4\u5355"}],E=[{title:"\u6807\u7684\u540D\u79F0",dataIndex:"symbol",key:"symbol"},{title:"\u6301\u4ED3\u6570\u91CF",dataIndex:"quantity",key:"quantity"},{title:"\u51BB\u7ED3\u6570\u91CF",dataIndex:"frozenQuantity",key:"frozenQuantity"}],p=(0,e.useState)([]),s=(0,l.Z)(p,2),g=s[0],C=s[1];function P(){(0,A.eG)().then(function(d){d&&d.success&&C(d.content.records.map(function(o){return{key:o.symbolId,symbol:o.symbol,quantity:o.quantity,frozenQuantity:o.frozenQuantity}}))})}var m=[{title:"\u6807\u7684\u540D\u79F0",dataIndex:"symbol",key:"symbol"},{title:"\u4EA4\u6613\u6570\u91CF",dataIndex:"quantity",key:"quantity"},{title:"\u4EA4\u6613\u4EF7\u683C",dataIndex:"price",key:"price"},{title:"\u4EA4\u6613\u65B9\u5411",dataIndex:"side",key:"side"},{title:"\u6210\u4EA4\u6570\u91CF",dataIndex:"completedQuantity",key:"completedQuantity"},{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",render:function(o,O){return e.createElement(z.Z,{size:"middle"},e.createElement("a",{onClick:function(){re({symbolId:O.symbolId,cancelOrderId:O.key}).then(function(V){V&&V.success&&L.default.success(V.content),Q()})}},"\u64A4\u5355"))}}],$=(0,e.useState)([]),X=(0,l.Z)($,2),pe=X[0],he=X[1];function q(){(0,A.ul)().then(function(d){d&&d.success&&he(d.content.map(function(o){return{key:o.id,symbolId:o.symbolId,symbol:o.symbol,quantity:o.quantity,price:o.price,side:o.side,completedQuantity:o.completedQuantity}}))})}(0,e.useEffect)(function(){P(),q()},[]);var ve={holdPosition:e.createElement(D.Z,{columns:E,dataSource:g}),cancelOrder:e.createElement(D.Z,{columns:m,dataSource:pe})};function Q(){u.current&&u.current.reload(),P(),q()}return(0,e.useEffect)(function(){var d=setInterval(function(){Q()},1e4);return function(){clearInterval(d)}},[]),e.createElement("div",null,e.createElement(G.Z,{actionRef:u,title:"\u8D44\u4EA7\u4FE1\u606F",request:(0,Z.Z)(n().mark(function d(){return n().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,A.Nj)().then(function(j){return{success:j.success,data:{balance:j.content.balance,frozenFund:j.content.frozenFund}}}));case 1:case"end":return O.stop()}},d)}))},e.createElement(G.Z.Item,{label:"\u4F59\u989D",dataIndex:"balance"}),e.createElement(G.Z.Item,{label:"\u51BB\u7ED3\u7684\u8D44\u91D1",dataIndex:"frozenFund"})),e.createElement(k.Z,{type:"primary",onClick:function(){Q()}},"\u5237\u65B0"),e.createElement("br",null),e.createElement("br",null),e.createElement(b.Z,{style:{width:"100%"},tabList:I,activeTabKey:y,onTabChange:function(o){h(o)}},ve[y]))},ye=function(){var c=(0,e.useState)(0),u=(0,l.Z)(c,2),i=u[0],a=u[1];return e.createElement(ee.Z,null,e.createElement(x.Z,null,e.createElement(v.Z,{span:18},e.createElement(b.Z,{style:{margin:"0 16px 0 0"}},e.createElement(ce,{symbolId:i}))),e.createElement(v.Z,{span:6},e.createElement(b.Z,null,e.createElement(me,{selectSymbol:function(h){return a(h)}})))),e.createElement("br",null),e.createElement(b.Z,null,e.createElement(de,{symbolId:i})),e.createElement("br",null),e.createElement(b.Z,null,e.createElement(fe,null)))}},26362:function(_,M,t){"use strict";t.d(M,{Jt:function(){return W},cI:function(){return N},$v:function(){return Y},yq:function(){return H},Zc:function(){return Z},gs:function(){return z}});var S=t(80153),x=t(94043),f=t.n(x),v=t(72709);function W(r){return b.apply(this,arguments)}function b(){return b=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol",{method:"POST",data:l}));case 1:case"end":return n.stop()}},r)})),b.apply(this,arguments)}function N(r){return k.apply(this,arguments)}function k(){return k=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol/getTradeSymbolList",{method:"GET",params:l}));case 1:case"end":return n.stop()}},r)})),k.apply(this,arguments)}function Y(r){return D.apply(this,arguments)}function D(){return D=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol/getTradeSymbolPage",{method:"GET",params:l}));case 1:case"end":return n.stop()}},r)})),D.apply(this,arguments)}function H(r){return L.apply(this,arguments)}function L(){return L=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol/startTradeEngine",{method:"PUT",params:{symbolId:l}}));case 1:case"end":return n.stop()}},r)})),L.apply(this,arguments)}function Z(r){return w.apply(this,arguments)}function w(){return w=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol/closeTradeEngine",{method:"PUT",params:{symbolId:l}}));case 1:case"end":return n.stop()}},r)})),w.apply(this,arguments)}function z(r){return U.apply(this,arguments)}function U(){return U=(0,S.Z)(f().mark(function r(l){return f().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,v.Z)("/financial/tradeSymbol",{method:"DELETE",params:{symbolId:l}}));case 1:case"end":return n.stop()}},r)})),U.apply(this,arguments)}}}]);
